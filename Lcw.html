<script>
let currentChat = "";

function openChat(name) {
  currentChat = name;
  document.getElementById("chatTitle").innerText = name;
  document.getElementById("chatList").style.display = "none";
  document.getElementById("chatScreen").style.display = "flex";
  document.getElementById("messages").innerHTML = "";
  addMessage("Hey ğŸ‘‹", "other");
}

function goBack() {
  document.getElementById("chatScreen").style.display = "none";
  document.getElementById("chatList").style.display = "block";
}

function sendMsg() {
  const input = document.getElementById("msgInput");
  const text = input.value.trim();
  if (!text) return;

  addMessage(text, "me");
  input.value = "";

  setTimeout(() => {
    addMessage(smartReply(text), "other");
  }, 600);
}

function smartReply(msg) {
  msg = msg.toLowerCase();

  const random = arr => arr[Math.floor(Math.random() * arr.length)];

  if (/(hi|hello|hey|yo)/.test(msg))
    return random(["Hi ğŸ˜Š", "Hey!", "Hello ğŸ‘‹", "Hey there"]);

  if (/(how are you|how r u|how you)/.test(msg))
    return random(["Iâ€™m good ğŸ˜„", "Doing fine!", "All good, you?", "Pretty chill"]);

  if (/(fine|good|ok|okay|great)/.test(msg))
    return random(["Nice ğŸ‘", "Good to hear", "Thatâ€™s good"]);

  if (/(sad|tired|boring|bad)/.test(msg))
    return random(["Oh ğŸ˜•", "That sucks", "Hope it gets better"]);

  if (/(what are you doing|wyd)/.test(msg))
    return random(["Just chatting ğŸ˜„", "Nothing much", "Relaxing"]);

  if (/(where are you)/.test(msg))
    return random(["At home", "Around", "Somewhere comfy ğŸ˜„"]);

  if (/(haha|lol)/.test(msg))
    return random(["ğŸ˜‚ğŸ˜‚", "Haha", "ğŸ˜†"]);

  if (/(bye|good night|gn)/.test(msg))
    return random(["Bye ğŸ‘‹", "Good night ğŸŒ™", "Talk later"]);

  if (/(thanks|thank you)/.test(msg))
    return random(["Anytime ğŸ˜Š", "No problem", "Welcome"]);

  if (msg.length <= 2)
    return random(["Hmm?", "Yes?", "ğŸ‘€"]);

  return random([
    "Okay ğŸ¤”",
    "Hmm interesting",
    "Got it",
    "Alright",
    "I see",
    "Tell me"
  ]);
}

function addMessage(text, type) {
  const msg = document.createElement("div");
  msg.className = "msg " + type;
  msg.innerHTML = `
    ${text}
    <div class="time">
      ${new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}
    </div>
  `;
  const messages = document.getElementById("messages");
  messages.appendChild(msg);
  messages.scrollTop = messages.scrollHeight;
}
</script>
